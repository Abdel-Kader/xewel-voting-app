(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[632],{3511:function(e,t,n){"use strict";n.d(t,{J:function(){return a}});var r=n(1664),s=n(5893),a=function(){return(0,s.jsx)("nav",{className:"flex items-center justify-between flex-wrap bg-teal p-6 bg-primaire",children:(0,s.jsx)("div",{className:"flex items-center flex-no-shrink text-white mr-6",children:(0,s.jsx)(r.default,{href:"/",children:(0,s.jsx)("a",{className:"font-semibold text-2xl",style:{color:"#fff"},children:"Dakar Xewel Toastmaster"})})})})}},6655:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var r=n(5861),s=n(7757),a=n.n(s),i=n(5675),l=n(7294),c=(n(1664),n(3511)),o=n(5893);function d(){var e=(0,l.useState)([]),t=e[0],n=e[1],s=(0,l.useState)(!1),d=s[0],u=s[1],f=(0,l.useState)(null),m=f[0],x=f[1],h=(new Date).toISOString().substr(0,10).replace("T"," ");(0,l.useEffect)((function(){!function(){j.apply(this,arguments)}()}),[]);var p=function(){var e=(0,r.Z)(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!=m&&m.nom&&m.type&&m.dateSeance)){e.next=12;break}return t={nom:m.nom,type:m.type,dateSeance:m.dateSeance},e.next=4,fetch("/api/users/vote",{method:"POST",body:JSON.stringify(t)});case 4:if((n=e.sent).ok){e.next=9;break}throw new Error(n.statusText);case 9:201==n.status&&(alert("Vote effectu\xe9 avec succ\xe8s !"),window.location.reload(),localStorage.setItem("vot_impro","true"),localStorage.setItem("date_impro",h));case 10:e.next=13;break;case 12:alert("Veuillez choisir un candidat !");case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function j(){return(j=(0,r.Z)(a().mark((function e(){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.db-ip.com/v2/free/self");case 2:return e.sent,e.next=5,fetch("/api/users?type=3");case 5:if(!(t=e.sent).ok){e.next=16;break}if(204!==t.status){e.next=11;break}u(!0),e.next=16;break;case 11:return e.next=13,t.json();case 13:r=e.sent,n(r),u(!1);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return t.length>0?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(c.J,{}),(0,o.jsx)("div",{className:"md:container flex justify-center",children:(0,o.jsxs)("div",{className:"sm:w-full md:w-5/12 lg:w-5/12",children:[(0,o.jsx)("div",{className:"text-center",children:(0,o.jsx)(i.default,{src:"/../public/logo.jpg",width:200,height:200})}),(0,o.jsx)("div",{className:"border-2 p-4",style:{marginBottom:50},children:d?(0,o.jsx)("div",{className:"flex justify-center rounded h-10",style:{backgroundColor:"#c82333",color:"#fff",alignItems:"center"},children:"Aucun enregistrement trouv\xe9 !"}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("h1",{className:"text-xl h-16",children:[(0,o.jsx)("strong",{children:"Note : "}),"Choisissez votre meilleur improvisation"]}),t.map((function(e){return(0,o.jsx)("div",{className:"rounded border-2 sm:w-full mb-8",children:(0,o.jsxs)("div",{className:"flex items-center h-12",children:[(0,o.jsx)("input",{id:e.id,value:e,name:"platform",type:"radio",className:"w-14 h-5",onChange:function(){return function(e){x(e)}(e)}}),(0,o.jsx)("label",{htmlFor:"vote",className:"text-xl",children:e.nom})]})},e.id)})),(0,o.jsx)("br",{}),localStorage.getItem("vot_impro")&&localStorage.getItem("date_impro")==h?(0,o.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:(0,o.jsx)("div",{style:{color:"green"},children:"Votre vote a \xe9t\xe9 pris en compte !"})}):(0,o.jsx)("div",{className:"flex justify-items-end",children:(0,o.jsx)("div",{className:"rounded border-2 h-10 border-[#3490DC] m-4 bg-[#3490DC] w-auto",children:(0,o.jsx)("button",{className:"text-white w-full text-xl px-12",onClick:p,children:"Valider"})})})]})})]})}),(0,o.jsx)("br",{}),(0,o.jsx)("div",{className:"flex items-center justify-center flex-wrap bg-teal p-4 bg-primaire",style:{position:"fixed",width:"100%",bottom:0},children:(0,o.jsx)("p",{style:{display:"flex",justifyContent:"center",color:"#fff"},children:"\xa9 2021 By Abdel-Kader Sabiou"})})]}):(0,o.jsx)("div",{className:"md:container flex justify-center",children:(0,o.jsxs)("div",{className:"sm:w-full md:w-5/12 lg:w-5/12",children:[(0,o.jsx)("div",{className:"text-center",children:(0,o.jsx)(i.default,{src:"/../public/logo.jpg",width:200,height:200})}),(0,o.jsx)("div",{className:"border-2 p-4",style:{marginBottom:50},children:d?(0,o.jsx)("div",{className:"flex justify-center rounded h-10",style:{backgroundColor:"#c82333",color:"#fff",alignItems:"center"},children:"Aucun enregistrement trouv\xe9 !"}):null})]})})}},518:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/improvisation",function(){return n(6655)}])}},function(e){e.O(0,[379,774,888,179],(function(){return t=518,e(e.s=t);var t}));var t=e.O();_N_E=t}]);